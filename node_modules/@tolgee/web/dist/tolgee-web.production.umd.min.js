!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@tolgee/web"]={})}(this,(function(e){"use strict";var t,n=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))s.call(t,n)&&l(e,n,t[n]);return e},u=(e,t)=>r(e,a(t)),g=(e,t)=>{var n={};for(var r in e)i.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&o)for(var r of o(e))t.indexOf(r)<0&&s.call(e,r)&&(n[r]=e[r]);return n};function d(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function f(e){return Boolean(e&&"function"==typeof e.then)}function p(e,t){return f(e)?Promise.resolve(e).then(t):t(e)}function h(e,t,n){function r(n){const r=t(n);throw e.emit(r),console.error(r),r}try{const e=n();return f(e)?e.catch(r):e}catch(e){r(e)}}function v(e){const t=(Array.isArray(e)?e:[e]).map((e=>`'${e}'`)),n=t.slice(-2).join(" or ");return`Tolgee: You need to specify ${[...t.slice(0,-2),n].join(", ")} option`}function m(e){return"string"==typeof e?[e]:Array.isArray(e)?e:void 0}function y(e){return m(e)||[]}function b(e,t){return"object"!=typeof(n=t)||Array.isArray(n)||null===n?y(t):y(null==t?void 0:t[e]);var n}function E(e){return Array.from(new Set(e))}function w(e){return e?e.replace(/\/+$/,""):e}const L=(e,t)=>fetch(e,t);const O=(e=L)=>(t,n)=>{let r=(a=null==n?void 0:n.headers,Object.fromEntries(new Headers(a).entries()));var a;return r["x-api-key"]&&(r=Object.assign({"x-tolgee-sdk-type":"JS","x-tolgee-sdk-version":"prerelease"},r)),e(t,Object.assign(Object.assign({},n),{headers:r}))};function T(e){let t=[];return Object.freeze({listen(e){const n=t=>{e(t)};return t.push(n),{unsubscribe(){t=t.filter((e=>n!==e))}}},emit(n){e()&&t.forEach((e=>e({value:n})))}})}function A(e,t,n){const r=new Set,a=new Set;let o=[];function i(){if(0===o.length)return;const e=o;o=[],r.forEach((e=>{e({value:void 0})}));let n=new Set;e.forEach((e=>{void 0===e?n=void 0:void 0!==n&&e.forEach((e=>n.add(e)))}));!function(e){const n=new Set(t());a.forEach((t=>{(void 0===e||-1!==(null==e?void 0:e.findIndex((e=>n.has(e)||t.namespaces.has(e)))))&&t.fn({value:void 0})}))}(n?Array.from(n.keys()):void 0)}return Object.freeze({emit(t,n){e()&&(o.push(t),n?setTimeout(i,0):i())},listen(e){r.add(e);return{unsubscribe:()=>{r.delete(e)}}},listenSome(e){const t={fn:t=>{e(t)},namespaces:new Set};a.add(t);const r={unsubscribe:()=>{a.delete(t)},subscribeNs:e=>(y(e).forEach((e=>t.namespaces.add(e))),void 0===e&&t.namespaces.add(n()),r)};return r}})}class k extends Error{constructor(e,t,n=!1){const{language:r,namespace:a}=e;super(`Tolgee: Failed to fetch record for "${r}"${a&&` and "${a}"`}`),this.cause=t,this.isDev=n,this.name="RecordFetchError",this.language=r,this.namespace=a}}class N extends Error{constructor(e,t){super(e),this.cause=t,this.name="LanguageDetectorError"}}class j extends Error{constructor(e,t){super(e),this.cause=t,this.name="LanguageStorageError"}}const R=e=>{const t=new Map;return Object.entries(e).forEach((([e,n])=>{null!=n&&("object"!=typeof n?t.set(e,n):R(n).forEach(((n,r)=>{t.set(e+"."+r,n)})))})),t},x=e=>{const[t,...n]=e.split(":");return{language:t,namespace:n.join(":")||""}},P=({language:e,namespace:t})=>t?`${e}:${t}`:e;function C(e,t,n,r,a,o,i){const s=new Map,l=new Map;let c={},u=0;function g(t,n,r){const a=P(t);l.set(a,{data:R(n),version:r}),e.onCacheChange.emit(t)}async function d(r,a){let o;if(a)try{o=await n(r)}catch(t){const n=new k(r,t,!0);e.onError.emit(n),console.warn(n)}return o||(o=await async function(n){function r(t){const r=new k(n,t);throw e.onError.emit(r),console.error(r),r}const a=t(n);if(f(a)){const e=await a.catch(r);if(void 0!==e)return e}const o=c[P(n)];if("function"!=typeof o)return o;try{return await o()}catch(e){r(e)}}(r)),o}const p=Object.freeze({addStaticData(e){e&&(c=Object.assign(Object.assign({},c),e),Object.entries(e).forEach((([e,t])=>{if("function"!=typeof t){const n=x(e),r=l.get(e);r&&0!==r.version||g(n,t,0)}})))},invalidate(){s.clear(),u+=1},addRecord(e,t){g(e,t,u)},exists(e,t=!1){const n=l.get(P(e));return n&&t?n.version===u:Boolean(n)},getRecord(e){var t;return null===(t=l.get(P(r(e))))||void 0===t?void 0:t.data},getTranslation(e,t){var n;return null===(n=l.get(P(e)))||void 0===n?void 0:n.data.get(t)},getTranslationNs(e,t,n){var r;for(const a of e)for(const e of t){const t=null===(r=l.get(P({language:e,namespace:a})))||void 0===r?void 0:r.data.get(n);if(null!=t)return[a]}return E(e)},getTranslationFallback(e,t,n){var r;for(const a of e)for(const e of t){const t=null===(r=l.get(P({language:e,namespace:a})))||void 0===r?void 0:r.data.get(n);if(null!=t)return t}},changeTranslation(t,n,r){var a;const o=null===(a=l.get(P(t)))||void 0===a?void 0:a.data;null==o||o.set(n,r),e.onCacheChange.emit(Object.assign(Object.assign({},t),{key:n}))},isFetching(e){if(a())return!0;if(void 0===e)return s.size>0;const t=y(e);return Boolean(Array.from(s.keys()).find((e=>t.includes(x(e).namespace))))},isLoading(e,t){const n=y(t);return Boolean(a()||Array.from(s.keys()).find((t=>{const r=x(t);return(!n.length||n.includes(r.namespace))&&!p.exists({namespace:r.namespace,language:e})})))},async loadRecords(e,t){const n=e.map((e=>{const n=r(e),a=P(n),o=s.get(a);if(o)return{new:!1,promise:o,keyObject:n,cacheKey:a};const i=d(n,t)||Promise.resolve(void 0);return s.set(a,i),{new:!0,promise:i,keyObject:n,cacheKey:a}}));o.notify(),i.notify();const a=await Promise.all(n.map((e=>e.promise)));return n.forEach(((e,t)=>{const n=s.get(e.cacheKey)!==e.promise;if(e.new&&!n){s.delete(e.cacheKey);const n=a[t];n?p.addRecord(e.keyObject,n):p.getRecord(e.keyObject)||p.addRecord(e.keyObject,{})}})),o.notify(),i.notify(),n.map((e=>p.getRecord(e.keyObject)))},getAllRecords:()=>Array.from(l.entries()).map((([e,t])=>Object.assign(Object.assign({},x(e)),{data:t.data})))});return p}function S(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}const D="invalid",F={defaultNs:"",observerOptions:{tagAttributes:{textarea:["placeholder"],input:["value","placeholder"],img:["alt"],"*":["aria-label","title"]},restrictedElements:["script","style"],highlightKeys:["Alt"],highlightColor:"rgb(255, 0, 0)",highlightWidth:5,inputPrefix:"%-%tolgee:",inputSuffix:"%-%",passToParent:["option","optgroup"],fullKeyEncode:!1},observerType:"invisible",onFormatError:D,apiUrl:"https://app.tolgee.io",fetch:O(),onTranslationMissing:({key:e})=>e},I=(...e)=>{let t={};return e.forEach((e=>{t=Object.assign(Object.assign(Object.assign({},t),e),{observerOptions:Object.assign(Object.assign({},t.observerOptions),null==e?void 0:e.observerOptions)})})),t};function _(e,t){const n=I(F,null==t?void 0:t.initialOptions,e);return n.apiUrl=w(n.apiUrl),(null==e?void 0:e.fetch)&&(n.fetch=O(e.fetch)),{initialOptions:n,activeNamespaces:(null==t?void 0:t.activeNamespaces)||new Map,language:null==t?void 0:t.language,pendingLanguage:null==t?void 0:t.language,isInitialLoading:!1,isRunning:!1}}function U(e,t,n,r,a,o,i,s){const l={ui:void 0},c={formatters:[],finalFormatter:void 0,observer:void 0,devBackend:void 0,backends:[],ui:void 0,languageDetector:void 0,languageStorage:void 0},u=async({keysAndDefaults:e,target:t})=>{var n;const i=e.map((({key:e,ns:t,defaultValue:n})=>({key:e,defaultValue:n,fallbackNamespaces:r(t),namespace:a({key:e,ns:t})[0],translation:o({key:e,ns:t})})));null===(n=c.ui)||void 0===n||n.handleElementClick(i,t)},g=(e,t)=>{var n;return(null===(n=c.observer)||void 0===n?void 0:n.findPositions(e,t))||[]};function d(e){const t=o({key:e.key,ns:e.ns});return k.formatTranslation(Object.assign(Object.assign({},e),{translation:t,formatEnabled:!0}))}function f(){return{fetch:t().fetch}}function v(e){c.observer=null==e?void 0:e()}function m(){return Boolean(c.observer)}function y(e){e&&c.formatters.push(e)}function b(e){c.finalFormatter=e}function E(e){l.ui=e}function w(){return Boolean(l.ui)}function L(e){c.languageStorage=e}function O(e){c.languageDetector=e}function T(e){e&&c.backends.push(e)}function A(e){c.devBackend=e}const k=Object.freeze({addPlugin:function(e,t){t(e,Object.freeze({setFinalFormatter:b,addFormatter:y,setObserver:v,hasObserver:m,setUi:E,hasUi:w,setDevBackend:A,addBackend:T,setLanguageDetector:O,setLanguageStorage:L}))},findPositions:g,run(){var e,n;const{apiKey:r,apiUrl:a,projectId:o,observerOptions:f,tagNewKeys:p,filterTag:h}=t();c.ui=null===(e=l.ui)||void 0===e?void 0:e.call(l,{apiKey:r,apiUrl:a,projectId:o,highlight:k.highlight,changeTranslation:i,findPositions:g,onPermanentChange:e=>s.onPermanentChange.emit(e),tagNewKeys:p,filterTag:h}),null===(n=c.observer)||void 0===n||n.run({mouseHighlight:!0,options:f,translate:d,onClick:u})},stop(){var e;c.ui=void 0,null===(e=c.observer)||void 0===e||e.stop()},getLanguageStorage:()=>c.languageStorage,getInitialLanguage(){const e=n();return p(h(s.onError,(e=>new j("Tolgee: Failed to load language",e)),(()=>{var e;return null===(e=c.languageStorage)||void 0===e?void 0:e.getLanguage(f())})),(t=>e&&!e.includes(t)||!t?function(){if(!c.languageDetector)return;const e=n();return h(s.onError,(e=>new N("Tolgee: Failed to detect language",e)),(()=>{var t;return null===(t=c.languageDetector)||void 0===t?void 0:t.getLanguage(Object.assign({availableLanguages:e},f()))}))}():t))},setStoredLanguage:e=>h(s.onError,(e=>new j("Tolgee: Failed to store language",e)),(()=>{var t;return null===(t=c.languageStorage)||void 0===t?void 0:t.setLanguage(e,f())})),getDevBackend:()=>c.devBackend,getBackendRecord:async({language:e,namespace:t})=>{for(const n of c.backends){const r=await n.getRecord(Object.assign({language:e,namespace:t},f()));if(void 0!==r)return r}},getBackendDevRecord:async({language:e,namespace:n})=>{var r;const{apiKey:a,apiUrl:o,projectId:i,filterTag:s}=t();return null===(r=c.devBackend)||void 0===r?void 0:r.getRecord(Object.assign({apiKey:a,apiUrl:o,projectId:i,language:e,namespace:n,filterTag:s},f()))},getLanguageDetector:()=>c.languageDetector,retranslate(){var e;null===(e=c.observer)||void 0===e||e.retranslate()},highlight:(e,t)=>{var n,r;return(null===(r=null===(n=c.observer)||void 0===n?void 0:n.highlight)||void 0===r?void 0:r.call(n,e,t))||{unhighlight(){}}},unwrap(e){var t;return c.observer?null===(t=c.observer)||void 0===t?void 0:t.unwrap(e):{text:e,keys:[]}},wrap(e){var t;return c.observer?null===(t=c.observer)||void 0===t?void 0:t.wrap(e):e.translation},hasDevBackend:()=>Boolean(k.getDevBackend()),formatTranslation(n){var r,{formatEnabled:a}=n,o=S(n,["formatEnabled"]);const{key:i,translation:s,defaultValue:l,noWrap:u,params:g,ns:d,orEmpty:f}=o,p=null!=s?s:l;let h="";null==s&&(h=t().onTranslationMissing(o));let v=null!=p?p:f?"":h;const m=e(),y=a||!(null===(r=c.observer)||void 0===r?void 0:r.outputNotFormattable),b=e=>c.observer&&!u?c.observer.wrap({key:i,translation:e,defaultValue:l,params:g,ns:d}):e;v=b(v);try{if(p&&m&&y)for(const e of c.formatters)v=e.format({translation:v,language:m,params:g});c.finalFormatter&&p&&m&&y&&(v=c.finalFormatter.format({translation:v,language:m,params:g}))}catch(e){console.error(e);const n=("string"==typeof(E=e)?E:"string"==typeof(null==E?void 0:E.message)?E.message:void 0)||D,r=t().onFormatError,a=typeof r;v="string"===a?r:"function"===a?r(n,o):D,v=b(v)}var E;return v}});return k}const $=(e,t,n)=>{let r=e;return Object.freeze({init(e){r=e},notify(){const e=t();r!==e&&n(e),r=e}})};const M=(e,...t)=>{let n,r={};return"object"==typeof e?r=e:(r.key=e,"string"==typeof t[0]?(r.defaultValue=t[0],n=t[1]):"object"==typeof t[0]&&(n=t[0])),n&&(r=Object.assign(Object.assign({},function(e){var{ns:t,noWrap:n,orEmpty:r,params:a,language:o}=e,i=S(e,["ns","noWrap","orEmpty","params","language"]);const s={ns:t,noWrap:n,orEmpty:r,language:o};return Object.assign(Object.assign({},s),{params:Object.assign({},i)})}(n)),r)),r};function B({options:e}){const t=function(e,t){let n=!0;function r(){return n}const a=Object.freeze({onPendingLanguageChange:T(r),onLanguageChange:T(r),onLoadingChange:T(r),onFetchingChange:T(r),onInitialLoaded:T(r),onRunningChange:T(r),onCacheChange:T(r),onUpdate:A(r,e,t),onPermanentChange:T(r),onError:T(r),setEmitterActive(e){n=e},on:(e,t)=>{switch(e){case"pendingLanguage":return a.onPendingLanguageChange.listen(t);case"language":return a.onLanguageChange.listen(t);case"loading":return a.onLoadingChange.listen(t);case"fetching":return a.onFetchingChange.listen(t);case"initialLoad":return a.onInitialLoaded.listen(t);case"running":return a.onRunningChange.listen(t);case"cache":return a.onCacheChange.listen(t);case"update":return a.onUpdate.listen(t);case"permanentChange":return a.onPermanentChange.listen(t);case"error":return a.onError.listen(t)}}});return a.onInitialLoaded.listen((()=>a.onUpdate.emit())),a.onLanguageChange.listen((()=>a.onUpdate.emit())),a.onCacheChange.listen((({value:e})=>a.onUpdate.emit([e.namespace],!0))),a}(l,c),n=$(!1,(()=>i.isFetching()),t.onFetchingChange.emit),r=$(!1,(()=>j.isLoading()),t.onLoadingChange.emit),a=function(e,t,n){let r,a=_();const o=Object.freeze({init(e){a=_(e,a)},isRunning:()=>a.isRunning,setRunning(e){a.isRunning!==e&&(a.isRunning=e,n.emit(e))},isInitialLoading:()=>a.isInitialLoading,setInitialLoading(e){a.isInitialLoading=e},getLanguage:()=>a.language||a.initialOptions.language,setLanguage(t){a.language!==t&&(a.language=t,e.emit(t))},getPendingLanguage:()=>a.pendingLanguage||o.getLanguage(),setPendingLanguage(e){a.pendingLanguage!==e&&(a.pendingLanguage=e,t.emit(e))},getInitialOptions:()=>Object.assign(Object.assign({},a.initialOptions),r),addActiveNs(e){y(e).forEach((e=>{const t=a.activeNamespaces.get(e);void 0!==t?a.activeNamespaces.set(e,t+1):a.activeNamespaces.set(e,1)}))},removeActiveNs(e){y(e).forEach((e=>{const t=a.activeNamespaces.get(e);void 0!==t&&t>1?a.activeNamespaces.set(e,t-1):a.activeNamespaces.delete(e)}))},getRequiredNamespaces:()=>E([...a.initialOptions.ns||[a.initialOptions.defaultNs],...y(a.initialOptions.fallbackNs),...a.activeNamespaces.keys()]),getFallbackLangs(e){const t=e||o.getLanguage();return t?E([t,...b(t,a.initialOptions.fallbackLanguage)]):[]},getFallbackNs:()=>y(a.initialOptions.fallbackNs),getDefaultNs:e=>void 0===e?a.initialOptions.defaultNs:e,getAvailableLanguages(){if(a.initialOptions.availableLanguages)return a.initialOptions.availableLanguages;if(a.initialOptions.staticData){const e=Object.keys(a.initialOptions.staticData).map((e=>x(e).language));return Array.from(new Set(e))}},withDefaultNs:e=>({namespace:void 0===e.namespace?o.getInitialOptions().defaultNs:e.namespace,language:e.language}),overrideCredentials(e){r=e?Object.assign(Object.assign({},e),{apiUrl:w(e.apiUrl)}):void 0}});return o}(t.onLanguageChange,t.onPendingLanguageChange,t.onRunningChange),o=U(a.getLanguage,a.getInitialOptions,a.getAvailableLanguages,u,O,k,d,t),i=C(t,o.getBackendRecord,o.getBackendDevRecord,a.withDefaultNs,a.isInitialLoading,n,r);let s;function l(){return a.getFallbackNs()}function c(e){return a.getDefaultNs(e)}function u(e){return[...y(c(e)),...l()]}function g(e){return[...y(null!=e?e:c()),...a.getRequiredNamespaces()]}function d(e,t,n){const r=a.withDefaultNs(e),o=i.getTranslation(r,t);return i.changeTranslation(r,t,n),{revert(){i.changeTranslation(r,t,o)}}}function h(e){a.init(e),i.addStaticData(a.getInitialOptions().staticData)}function m(e,t){const n=a.getFallbackLangs(e),r=g(t),o=[];return n.forEach((e=>{r.forEach((t=>{i.exists({language:e,namespace:t},!0)||o.push({language:e,namespace:t})}))})),o}function L(e,t){const n=m(e,t);if(n.length)return p(j.loadRecords(n),(()=>{}))}function O({key:e,ns:t}){const n=a.getFallbackLangs(),r=u(null!=t?t:void 0);return i.getTranslationNs(r,n,e)}function k({key:e,ns:t,language:n}){const r=u(null!=t?t:void 0),o=a.getFallbackLangs(n);return i.getTranslationFallback(r,o,e)}function N(){const e=p(function(){if(a.getLanguage())return;return p(o.getInitialLanguage(),(e=>{const t=e||a.getInitialOptions().defaultLanguage;t&&a.setLanguage(t)}))}(),(()=>L()));if(f(e))return a.setInitialLoading(!0),n.notify(),r.notify(),Promise.resolve(e).then((()=>{a.setInitialLoading(!1),n.notify(),r.notify(),t.onInitialLoaded.emit()}));t.onInitialLoaded.emit()}e&&h(e),t.onUpdate.listen((()=>{a.isRunning()&&o.retranslate()}));const j=Object.freeze(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),a),o),i),{init:h,getTranslation:k,changeTranslation:d,getTranslationNs:O,getDefaultAndFallbackNs:u,findPositions:o.findPositions,getRequiredRecords:m,async changeLanguage(e){a.getPendingLanguage()===e&&a.getLanguage()===e||(a.setPendingLanguage(e),a.isRunning()&&await L(e),e===a.getPendingLanguage()&&(a.setLanguage(e),await o.setStoredLanguage(e)))},async addActiveNs(e,t){t||a.addActiveNs(e),a.isRunning()&&await L(void 0,e)},loadRecords:e=>i.loadRecords(e,j.isDev()),loadRecord:async e=>(await j.loadRecords([e]))[0],isLoading:e=>i.isLoading(a.getLanguage(),e),isLoaded(e){const t=a.getLanguage();if(!t)return!1;const n=a.getFallbackLangs(t),r=g(e),o=[];return n.forEach((e=>{r.forEach((t=>{i.exists({language:e,namespace:t})||o.push({language:e,namespace:t})}))})),0===o.length},t:(...e)=>{const t=M(...e),n=k(t);return o.formatTranslation(Object.assign(Object.assign({},t),{translation:n}))},isDev:()=>Boolean(a.getInitialOptions().apiKey&&a.getInitialOptions().apiUrl),run:()=>(function(){if((o.getLanguageDetector()||o.getLanguageStorage())&&!a.getAvailableLanguages())throw new Error(v("availableLanguages"));if(!a.getLanguage()&&!a.getInitialOptions().defaultLanguage)throw new Error(v(["defaultLanguage","language"]))}(),a.isRunning()||(a.setRunning(!0),o.run(),s=N()),Promise.resolve(s)),stop(){a.isRunning()&&(o.stop(),a.setRunning(!1))}}));return j}const K=()=>{const e={plugins:[],options:{}},t=Object.freeze({use:n=>(e.plugins.push(n),t),updateDefaults:n=>(e.options=I(e.options,n),t),init(t){const n=function(e){const t=B({options:e});function n(e){const n=t.isRunning();n&&t.stop(),e(),t.isDev()&&t.invalidate(),n&&t.run()}t.isDev()&&t.invalidate();const r=Object.freeze({on:t.on,onNsUpdate:t.onUpdate.listenSome,setEmitterActive:t.setEmitterActive,getLanguage:t.getLanguage,getPendingLanguage:t.getPendingLanguage,changeLanguage:t.changeLanguage,changeTranslation:t.changeTranslation,addActiveNs:t.addActiveNs,removeActiveNs:t.removeActiveNs,loadRecords:t.loadRecords,loadRecord:t.loadRecord,addStaticData:t.addStaticData,getRecord:t.getRecord,getAllRecords:t.getAllRecords,isLoaded:t.isLoaded,getRequiredRecords:t.getRequiredRecords,isInitialLoading:t.isInitialLoading,isLoading:t.isLoading,isFetching:t.isFetching,isRunning:t.isRunning,run:t.run,stop:t.stop,t:t.t,highlight:t.highlight,findPositions:t.findPositions,getInitialOptions:t.getInitialOptions,isDev:t.isDev,wrap:t.wrap,unwrap:t.unwrap,overrideCredentials(e){n((()=>t.overrideCredentials(e)))},addPlugin(e){e&&n((()=>t.addPlugin(r,e)))},updateOptions(e){e&&n((()=>t.init(e)))}});return r}(I(e.options,t));return e.plugins.forEach(n.addPlugin),n}});return t},V=0,z=1,W=2;class G extends Error{constructor(e,t,n){let r,a="";e===V?r="Empty parameter":e===z?(r="Unexpected character",a="Did you forget to use FormatIcu to render ICU message syntax?"):r="Unexpected end",super(`Tolgee parser: ${r} at ${t} in "${n}"`+(a?"\n"+a:"")),this.code=e,this.index=t}}function Y(e){return/\s/.test(e)}const H=0,X=1,q=2,J=3,Z=4,Q=new Set([q,X,H]),ee="'",te=new Set(["{","}",ee]),ne=e=>/[0-9a-zA-Z_]/.test(e);function re(e,t){const[n,r]=function(e){let t=H,n="",r="",a="";const o=[],i=[];let s=0;function l(t){throw new G(t,s,e)}const c=()=>{o.push(n),n=""},u=()=>{""===r&&l(V),i.push(r),r=""};for(s=0;s<e.length;s++)switch(a=e[s],t){case H:a===ee?(n+=a,t=X):"{"===a?(c(),t=J):(n+=a,t=H);break;case X:te.has(a)?(n=n.slice(0,-1)+a,t=q):(n+=a,t=H);break;case q:a===ee?t=H:(n+=a,t=q);break;case J:"}"===a?(u(),t=H):Y(a)?""!==r&&(u(),t=Z):(ne(a)||l(z),r+=a,t=J);break;case Z:"}"==a?t=H:Y(a)?t=Z:l(z)}return Q.has(t)||l(W),c(),[o,i]}(e),a=[n[0]];for(let o=1;o<n.length;o++){const i=null==t?void 0:t[r[o-1]];if(void 0===i)throw new Error(`Missing parameter "${r[o-1]}" in "${e}"`);a.push(String(i)),a.push(n[o])}return a.join("")}const ae="__tolgee_dev_tools",oe="data-tolgee-key-only",ie="data-tolgee-restricted",se="_tolgee",le="_tolgee-highlighter";function ce(){var e,t;return void 0===(null==(t=null==(e=globalThis.window)?void 0:e.document)?void 0:t.createElement)}function ue(e){if(ce())throw new Error(`${e}: Can't run on the server`)}function ge(e,t){return{oldTextContent:e,keys:t}}function de(e){return e.textContent}function fe(e,t){e.textContent=t}function pe(e,t){var n;const r=void 0===e.key||void 0===t.key||t.key===e.key,a=void 0===e.ns||void 0===t.ns||-1!==(null==(n=e.ns)?void 0:n.findIndex((e=>{var n;return null==(n=t.ns)?void 0:n.includes(e)})));return r&&a}const he={position:"fixed",boxSizing:"content-box",zIndex:String(Number.MAX_SAFE_INTEGER),contain:"layout",display:"block",borderStyle:"solid",borderRadius:"4px"};function ve({highlightColor:e,highlightWidth:t}){return Object.freeze({initHighlighter(n,r){!function(n,r){r.highlight=()=>{if(!n.isConnected)return;const a=function(e){for(;e;){if(null!==e.getAttribute("disabled"))return!1;e=e.parentElement}return!0}(n);let o=r.highlightEl;o||(o=document.createElement("div"),o.classList.add(le),Object.entries(he).forEach((([e,t])=>{o.style[e]=t})),o.style.borderColor=e,r.highlightEl=o,document.body.appendChild(o));const i=n.getBoundingClientRect();o.style.pointerEvents=a?"none":"auto",o.style.borderWidth=t+"px",o.style.top=i.top-t+"px",o.style.left=i.left-t+"px",o.style.width=i.width+"px",o.style.height=i.height+"px"}}(n,r),function(e,t){t.unhighlight=()=>{var e;null==(e=t.highlightEl)||e.remove(),t.highlightEl=void 0}}(0,r)}})}const me={capture:!0},ye={capture:!0,passive:!0},be=new Map([["Control","ctrlKey"],["Alt","altKey"],["Meta","metaKey"],["Shift","shiftKey"]]);function Ee({highlightKeys:e,elementStore:t,onClick:n,options:r}){var a,o;const i=new Set;let s,l,c=[];const u=(null==(a=r.targetElement)?void 0:a.getRootNode())||document,g=(null==(o=r.targetElement)?void 0:o.ownerDocument)||document;function d(){var e;const n=t.get(s);n&&(n.preventClean=!1,null==(e=n.unhighlight)||e.call(n),s=void 0)}function f(){const e=l;let n;if(e&&T()){n=function(e){for(const n of e){const e=O(n,(e=>t.get(e)));if(void 0!==e)return e||void 0}}(u.elementsFromPoint(e.x,e.y)||[])}!function(e){var n;if(s!==e){d();const r=t.get(e);r&&(r.preventClean=!0,null==(n=r.highlight)||n.call(r),s=e)}}(n)}function p(e){l=e,f()}function h(e){for(const[t,n]of be.entries())i.has(t)&&!e[n]?i.delete(t):!i.has(t)&&e[n]&&i.add(t)}function v(e){var t;h(e),T()&&(t=e.target,!Boolean(O(t,(e=>e.id===ae))))&&(e.stopPropagation(),e.preventDefault())}function m(e){h(e),p({x:e.clientX,y:e.clientY})}function y(e){h(e),f()}function b(e){h(e),f()}function E(){var e;const n=t.get(s);null==(e=null==n?void 0:n.highlight)||e.call(n)}function w(e){v(e),h(e),p({x:e.clientX,y:e.clientY}),T()&&s&&(n(s),d())}function L(e,t,n){g.addEventListener(e,t,n),c.push([e,t,n])}function O(e,t){return e.id===ae?null:t(e)?e:(null==e?void 0:e.parentElement)?O(e.parentElement,t):void 0}function T(){for(const t of e)if(!i.has(t))return!1;return!0}return Object.freeze({stop(){!function(){for(const e of c)g.removeEventListener(...e);c=[]}()},run(){L("keydown",y,me),L("keyup",b,me),L("mousemove",m,ye),L("scroll",E,ye),L("click",w,me),L("mouseenter",v,me),L("mouseover",v,me),L("mouseout",v,me),L("mouseleave",v,me),L("mousedown",v,me),L("mouseup",v,me)}})}function we(e,t,n){const r=ve({highlightColor:e.highlightColor,highlightWidth:e.highlightWidth}),a=Ee({highlightKeys:e.highlightKeys,elementStore:t,onClick(e){const r=t.get(e);n({target:e,keysAndDefaults:s(r)})},options:e});function o(t){return-1!==e.restrictedElements.indexOf(t.tagName.toLowerCase())||null!==t.closest(`[${ie}]`)}function i(e,n){var r;n.highlightEl&&(null==(r=n.unhighlight)||r.call(n)),e.removeAttribute(se),t.remove(e)}function s(e){return function(e){return Array.from(e.nodes.values()).reduce(((e,t)=>[...e,...t.keys.map((e=>({key:e.key,defaultValue:e.defaultValue,ns:e.ns})))]),[])}(e)}return Object.freeze({isRestricted:o,register(e,n,a){if(o(e))return;const i=e;let s=t.get(i);s||(s=function(e){return{element:e,nodes:new Map}}(i),t.set(i,s),i.setAttribute(se,"true")),s.nodes.set(n,a),r.initHighlighter(i,s)},forEachElement:t.forEachElement,cleanupLingeringKeyAttributes(){t.forEachElement(((e,t)=>{if(!t.preventClean){for(const[e]of t.nodes)if(e.nodeType===Node.ATTRIBUTE_NODE){const n=e;n.name===oe&&null===n.ownerElement&&t.nodes.delete(n)}0===t.nodes.size&&i(e,t)}}))},cleanupRemovedNodes(e){t.forEachElement(((t,n)=>{n.preventClean||(e.has(t)||function(e,t){for(const[n]of e.nodes)t.has(n)&&e.nodes.delete(n)}(n,e),(e.has(t)||0===n.nodes.size)&&i(t,n))}))},findAll(e,n){const r=[];return t.forEachElement(((t,a)=>{for(const t of a.nodes.values()){if(t.keys.find((t=>pe({key:e,ns:m(n)},{key:t.key,ns:m(t.ns)})))){r.push(a);break}}})),r},run(e){e&&a.run()},stop(){a.stop(),t.forEachElement(((e,t)=>{var n;t.highlightEl&&(null==(n=t.unhighlight)||n.call(t))}))}})}function Le(){let e,t=!1;const n=function(){const e=new Map;return Object.freeze({set(t,n){e.set(t,n)},get:t=>t&&e.get(t),remove:t=>e.delete(t),forEachElement(t){e.forEach(((e,n)=>t(n,e)))}})}();function r({mouseHighlight:e,options:r,wrapper:a,onClick:o}){if(ce())return{stop(){t=!1},wrapper:a};const i=function(e){const t=Object.freeze({getSuitableParent(n){const r=function(e){return e.parentElement?e.parentElement:e.ownerElement&&e.ownerElement||void 0}(n);if(void 0===r)throw console.error(n),new Error("No suitable parent found for node above.");if(!e.passToParent)return r;if(Array.isArray(e.passToParent)){const t=e=>r.tagName.toLowerCase()===e.toLowerCase();if(-1===e.passToParent.findIndex(t))return r}return"function"!=typeof e.passToParent||e.passToParent(r)?t.getSuitableParent(r):r}});return t}(r),s=function(e,t){const n=Object.freeze({handleAttributes(n,r=!0){var a,o;const i=[],s=Object.fromEntries(Object.entries(e.tagAttributes).map((([e,t])=>[e.toUpperCase(),t])));if(n.nodeType===Node.ELEMENT_NODE){const e=n;let r=null!=(a=s[e.tagName.toUpperCase()])?a:[];"*"in s&&(r=r.concat(s["*"])),i.push(...r.filter((t=>e.hasAttribute(t))).map((t=>e.getAttributeNode(t))).filter((e=>t.testAttribute(e))))}if(r){const e=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,(e=>{var t,n;return(null==(t=s[e.tagName.toUpperCase()])?void 0:t.some((t=>e.hasAttribute(t))))||(null==(n=s["*"])?void 0:n.some((t=>e.hasAttribute(t))))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}));for(;e.nextNode();){const n=e.currentNode;let r=null!=(o=s[n.tagName.toUpperCase()])?o:[];"*"in s&&(r=r.concat(s["*"])),i.push(...r.filter((e=>n.hasAttribute(e))).map((e=>n.getAttributeNode(e))).filter((e=>t.testAttribute(e))))}}return i},handleChildList(e){const t=[];return t.push(...e.flatMap((e=>n.handleAttributes(e,!0)))),t.push(...e.flatMap((e=>n.handleText(e)))),t},handleText(e){if(e.nodeType===Node.TEXT_NODE)return t.testTextNode(e)?[e]:[];const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(e=>t.testTextNode(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP));for(;r.nextNode();)n.push(r.currentNode);return n}});return n}(r,a),l=we(r,n,o);function c(e){for(const t of e){const e=t.parentElement;if(e&&l.isRestricted(e))continue;const n=de(t),r=n?a.unwrap(n):null;if(r){const{text:e,keys:a}=r;fe(t,e);const o=ge(n,a),s=i.getSuitableParent(t);l.register(s,t,o)}}}function u(e){const t=i.getSuitableParent(e);l.register(t,e,{oldTextContent:"",keys:[{key:de(e)}],keyAttributeOnly:!0})}function g(e,t){if(e.nodeType===Node.ATTRIBUTE_NODE){const t=e;if(t.name===oe)return void u(t)}if(e.nodeType===Node.ELEMENT_NODE){const t=e.getAttributeNode(oe);t&&u(t)}if(!t)return;const n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,(e=>e.hasAttribute(oe)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP));for(;n.nextNode();){u(n.currentNode.getAttributeNode(oe))}}const d=new MutationObserver((e=>{if(!t)return;const n=e.filter((e=>"childList"===e.type)).flatMap((e=>Array.from(e.removedNodes))),r=new Set(n);for(const e of n){if(e.nodeType===Node.ELEMENT_NODE)for(let t=0;t<e.attributes.length;t++)r.add(e.attributes[t]);const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);for(;t.nextNode();){const e=t.currentNode;if(e.nodeType===Node.ELEMENT_NODE){const t=e;for(let e=0;e<t.attributes.length;e++)r.add(t.attributes[e])}r.add(e)}}r.size>0&&l.cleanupRemovedNodes(r),e.some((e=>"attributes"===e.type&&e.attributeName===oe))&&l.cleanupLingeringKeyAttributes();const a=new Set;for(const t of e)switch(t.type){case"characterData":s.handleText(t.target).forEach((e=>a.add(e)));break;case"childList":g(t.target,!0),t.addedNodes.length>0&&s.handleChildList(Array.from(t.addedNodes)).forEach((e=>a.add(e))),t.removedNodes.length>0&&s.handleChildList(Array.from(t.removedNodes)).forEach((e=>a.delete(e)));break;case"attributes":t.attributeName===oe&&g(t.target,!1),s.handleAttributes(t.target,!1).forEach((e=>a.add(e)))}c([...a])})),f=r.targetElement||document;t=!0,l.run(e),g(f,!0),c(s.handleChildList([f]));const p=new Set;return p.add(oe),Object.values(r.tagAttributes).forEach((e=>e.forEach((e=>p.add(e.toLowerCase()))))),d.observe(f,{attributes:!0,attributeFilter:[...p],childList:!0,subtree:!0,characterData:!0}),{stop(){t=!1,l.stop(),d.disconnect()},elementRegistry:l,wrapper:a}}return Object.freeze({run(t){e=r(t)},stop(){null==e||e.stop()},forEachElement(t){var n,r;null==(r=null==(n=null==e?void 0:e.elementRegistry)?void 0:n.forEachElement)||r.call(n,t)},highlight(t,n){var r;const a=(null==(r=null==e?void 0:e.elementRegistry)?void 0:r.findAll(t,n))||[];return a.forEach((e=>{var t;return null==(t=e.highlight)?void 0:t.call(e)})),{unhighlight(){a.forEach((e=>{var t;return null==(t=e.unhighlight)?void 0:t.call(e)}))}}},findPositions(t,n){var r;const a=(null==(r=null==e?void 0:e.elementRegistry)?void 0:r.findAll(t,n))||[],o=[];return a.sort(((e,t)=>e.element.compareDocumentPosition(t.element)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),a.forEach((e=>{const r=e.element.getBoundingClientRect();e.nodes.forEach((e=>{e.keys.forEach((e=>{pe({key:t,ns:m(n)},{key:e.key,ns:m(e.ns)})&&o.push({position:{x:r.x,y:r.y,width:r.width,height:r.height},keyName:e.key,keyNamespace:e.ns||""})}))}))})),o},unwrap:t=>e?e.wrapper.unwrap(t):{text:t,keys:[]},wrap:t=>e?e.wrapper.wrap(t):t.translation||""})}var Oe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Te={};!function(e){function t(e){for(var t=0,n=Math.min(65536,e.length+1),r=new Uint16Array(n),a=[],o=0;;){var i=t<e.length;if(!i||o>=n-1){var s=r.subarray(0,o);if(a.push(String.fromCharCode.apply(null,s)),!i)return a.join("");e=e.subarray(t),t=0,o=0}var l=e[t++];if(0==(128&l))r[o++]=l;else if(192==(224&l)){var c=63&e[t++];r[o++]=(31&l)<<6|c}else if(224==(240&l)){c=63&e[t++];var u=63&e[t++];r[o++]=(31&l)<<12|c<<6|u}else if(240==(248&l)){var g=(7&l)<<18|(c=63&e[t++])<<12|(u=63&e[t++])<<6|63&e[t++];g>65535&&(g-=65536,r[o++]=g>>>10&1023|55296,g=56320|1023&g),r[o++]=g}}}var n="Failed to ",r=function(e,t,r){if(e)throw new Error("".concat(n).concat(t,": the '").concat(r,"' option is unsupported."))},a="function"==typeof Buffer&&Buffer.from,o=a?function(e){return Buffer.from(e)}:function(e){for(var t=0,n=e.length,r=0,a=Math.max(32,n+(n>>>1)+7),o=new Uint8Array(a>>>3<<3);t<n;){var i=e.charCodeAt(t++);if(i>=55296&&i<=56319){if(t<n){var s=e.charCodeAt(t);56320==(64512&s)&&(++t,i=((1023&i)<<10)+(1023&s)+65536)}if(i>=55296&&i<=56319)continue}if(r+4>o.length){a+=8,a=(a*=1+t/e.length*2)>>>3<<3;var l=new Uint8Array(a);l.set(o),o=l}if(0!=(4294967168&i)){if(0==(4294965248&i))o[r++]=i>>>6&31|192;else if(0==(4294901760&i))o[r++]=i>>>12&15|224,o[r++]=i>>>6&63|128;else{if(0!=(4292870144&i))continue;o[r++]=i>>>18&7|240,o[r++]=i>>>12&63|128,o[r++]=i>>>6&63|128}o[r++]=63&i|128}else o[r++]=i}return o.slice?o.slice(0,r):o.subarray(0,r)};function i(){this.encoding="utf-8"}i.prototype.encode=function(e,t){return r(t&&t.stream,"encode","stream"),o(e)};var s=!a&&"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL,l=["utf-8","utf8","unicode-1-1-utf-8"],c=t;a?c=function(e,t){return(e instanceof Buffer?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength)).toString(t)}:s&&(c=function(e){try{return function(e){var t;try{var n=new Blob([e],{type:"text/plain;charset=UTF-8"});t=URL.createObjectURL(n);var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(),r.responseText}finally{t&&URL.revokeObjectURL(t)}}(e)}catch(n){return t(e)}});var u="construct 'TextDecoder'",g="".concat(n," ").concat(u,": the ");function d(e,t){if(r(t&&t.fatal,u,"fatal"),e=e||"utf-8",!(a?Buffer.isEncoding(e):-1!==l.indexOf(e.toLowerCase())))throw new RangeError("".concat(g," encoding label provided ('").concat(e,"') is invalid."));this.encoding=e,this.fatal=!1,this.ignoreBOM=!1}d.prototype.decode=function(e,t){var n;return r(t&&t.stream,"decode","stream"),n=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),c(n,this.encoding)},e.TextEncoder=e.TextEncoder||i,e.TextDecoder=e.TextDecoder||d}("undefined"!=typeof window?window:Oe);const Ae=d({__proto__:null,default:Te},[Te]);null==(t=console.assert)||t.call(console,Ae);const ke=["‌","‍"],Ne=RegExp(`([${ke.join("")}]{9})+`,"gu");function je(e){const t=function(e){return Array.from((new TextEncoder).encode(e))}(e).map(Number),n=t.map((e=>function(e){const t=8-e.length;return"0".repeat(t)+e}(e.toString(2))+"0")).join("");return Array.from(n).map((e=>ke[Number(e)])).join("")}function Re(e){const t=Array.from(e).map((e=>ke.indexOf(e))).map(String).join("").match(/(.{9})/g),n=Uint8Array.from((null==t?void 0:t.map((e=>parseInt(e.slice(0,8),2))))||[]);return r=n,(new TextDecoder).decode(new Uint8Array(r));var r}function xe({fullKeyEncode:e}){const t=function(){const e=[];return Object.freeze({valueToNumber(t){let n=e.indexOf(t);return-1===n&&(n=e.length,e.push(t)),n},numberToValue:t=>e[t]})}();function n(e){const t={k:e.key,n:e.ns||void 0,d:e.defaultValue};return JSON.stringify(t)}function r(e){return je(e+"\n")}return Object.freeze({unwrap(e){const n=[],r=function(e){var t;const n=null==(t=e.match(Ne))?void 0:t.filter((e=>e.length>8));return(null==n?void 0:n.map(Re))||[]}(e);r.forEach((e=>{const r=function(e){return e.split("\n").filter((e=>e.length)).map((e=>{if("{"===e[0])return e;{const n=Number(e);return t.numberToValue(n)}}))}(e);r.forEach((e=>{const t=function(e){try{return JSON.parse(e||"{}")}catch(e){return void console.error(e)}}(e);if(t){const{k:e,d:r,n:a}=t;n.push({key:e,defaultValue:r,ns:a})}}))}));const a=function(e){return e.replace(Ne,"")}(e);return{text:a,keys:n}},wrap({key:a,defaultValue:o,translation:i,ns:s}){let l;if(e){l=r(n({key:a,ns:s}))}else{const e=n({key:a,ns:s,defaultValue:o}),i=t.valueToNumber(e);l=r(String(i))}const c=i||"";return"string"==typeof c?c+l:c},testTextNode(e){var t,n,r;return null!=(r=(null==(t=e.textContent)?void 0:t.includes(`${ke[0]}${ke[0]}`))||(null==(n=e.textContent)?void 0:n.includes(`${ke[1]}${ke[0]}`)))&&r},testAttribute:e=>e.value.includes(`${ke[0]}${ke[0]}`)||e.value.includes(`${ke[1]}${ke[0]}`)})}function Pe(e,t){let n=0;for(;e>-1&&"\\"===t[e-1];)n++,e--;return n%2==1}function Ce({inputPrefix:e,inputSuffix:t,translate:n}){function r(e){const{key:t,params:r,defaultValue:a,ns:o}=function(e){let t=!1,n="",r="",a="KEY";const o={key:"",ns:void 0,params:{},defaultValue:void 0},i=e=>{o.ns=e};for(const s of e)"\\"!==s||t?t?(t=!1,n+=s):"KEY"!==a||","!==s?"KEY"!==a||"|"!==s?"NAMESPACE"!==a||","!==s?"KEY"!==a||":"!==s?"DEFAULT_VALUE"!==a||":"!==s?"PARAM_NAME"!==a||":"!==s?"PARAM_VALUE"!==a||","!==s?n+=s:(a="PARAM_NAME",o.params[r]=n,n=""):(a="PARAM_VALUE",r=n,n=""):(a="PARAM_NAME",o.defaultValue=n,n=""):(a="PARAM_NAME",o.key=n,n=""):(a="DEFAULT_VALUE",i(n),n=""):(a="NAMESPACE",o.key=n,n=""):(a="DEFAULT_VALUE",o.key=n,n=""):t=!0;return"KEY"===a&&(o.key=n),"DEFAULT_VALUE"===a&&(o.defaultValue=n),"PARAM_VALUE"===a&&(o.params[r]=n),"NAMESPACE"===a&&i(n),o}(e);return{translated:n({key:t,params:r,defaultValue:a,ns:o,noWrap:!0}),key:t,params:r,defaultValue:a,ns:o}}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return"string"==typeof e?e.replace(new RegExp("[,:|\\\\]","gs"),"\\$&"):"number"==typeof e||"bigint"==typeof e?e.toString():(console.warn(`Parameters of type "${typeof e}" are not supported in "text" wrapper mode.`),e)}return Object.freeze({wrap({key:n,params:r,defaultValue:a,ns:i}){let s=Object.entries(r||{}).map((([e,t])=>`${o(e)}:${o(t)}`)).join(",");s=s.length?`:${s}`:"";const l=void 0!==a?`,${o(a)}`:"",c="string"==typeof i?[i]:i,u=(null==c?void 0:c.length)?`|${c.map((e=>o(e))).join("|")}`:"";return`${e}${o(n)}${u}${l}${s}${t}`},unwrap(n){const o=new RegExp(`(\\\\?)(${a(e)}(.*?)${a(t)})`,"gs"),i=[];let s,l=!1,c=0,u="";for(;null!==(s=o.exec(n));){let e=s[1];const[t,a,o,g]=s,{index:d,input:f}=s;if(u+=f.substr(c,d-c),c=d+t.length,"\\"===e){if(!Pe(d,n)){u+=o;continue}e=""}const p=r(g);i.push({key:p.key,params:p.params,defaultValue:p.defaultValue,ns:p.ns}),l=!0,u+=e+p.translated}return u+=n.substring(c),l?{text:u,keys:i}:{text:n,keys:[]}},testTextNode(n){var r,a,o;return null!=(o=(null==(r=n.textContent)?void 0:r.includes(e))&&(null==(a=n.textContent)?void 0:a.includes(t)))&&o},testAttribute:n=>n.value.includes(e)&&n.value.includes(t)})}const Se="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";function De(e){const t=Se.indexOf(e);if(-1===t)throw new Error("Invalid character found: "+e);return t}function Fe(e){const t=(e=e.toUpperCase()).length;let n=0,r=0,a=0;const o=new Uint8Array(5*t/8|0);for(let i=0;i<t;i++)r=r<<5|De(e[i]),n+=5,n>=8&&(o[a++]=r>>>n-8&255,n-=8);return function(e){const t=new Uint8Array(e),n=t.length;let r="",a=Math.pow(2,16)-1;for(let e=0;e<n;e+=a)e+a>n&&(a=n-e),r+=String.fromCharCode.apply(null,t.subarray(e,e+a));return r}(o.buffer)}function Ie(e){if(e)try{const[t,n]=e.split("_");if("tgpak"===t){const[e]=Fe(n).split("_");return Number(e)}}catch(e){console.warn("Tolgee: Api key can't be parsed")}}function _e(...e){const t="undefined"==typeof window?void 0:window.location.origin;return new URL(function(...e){let t=e[0];return e.slice(1).forEach((e=>{var n;n=e,t=`${t.replace(/\/+$/,"")}/${n=n.replace(/^\/+/,"")}`})),t}(...e),t)}function Ue({message:e,recievingMessage:t,data:n,attempts:r=1,timeout:a=300}){let o=!1;const i=()=>new Promise(((r,o)=>{const i=function(e,t){const n=n=>{var r,a;e.includes(null==(r=n.data)?void 0:r.type)&&t(null==(a=n.data)?void 0:a.data)};return window.addEventListener("message",n,!1),{unsubscribe(){window.removeEventListener("message",n)}}}(t,(function(e){clearTimeout(s),l(),r(e)}));window.postMessage({type:e,data:n},window.origin);const s=setTimeout((function(){l(),o()}),a);function l(){i.unsubscribe()}}));return{cancel(){o=!0},promise:(async()=>{for(let e=0;e<r;e++){if(o)return new Promise((()=>{}));try{return await i()}catch(e){continue}}if(!o)throw`Didn't recieve ${t.join(" or ")} in time.`;return new Promise((()=>{}))})()}}let $e=null;function Me(e){var t;return $e||($e=(t=`https://cdn.jsdelivr.net/npm/@tolgee/web@${e}/dist/tolgee-in-context-tools.umd.min.js`,new Promise(((e,n)=>{const r=document.createElement("script");r.src=t,r.addEventListener("load",(()=>e())),r.addEventListener("error",(e=>n(e.error))),document.head.appendChild(r)}))).then((()=>window["@tolgee/in-context-tools"].InContextTools))),$e}const Be="__tolgee_apiKey",Ke="__tolgee_apiUrl";function Ve(){const e=sessionStorage.getItem(Be)||void 0,t=sessionStorage.getItem(Ke)||void 0;if(e&&t)return{apiKey:e,apiUrl:t}}function ze(){sessionStorage.removeItem(Be),sessionStorage.removeItem(Ke)}e.BrowserExtensionPlugin=()=>e=>e;(()=>{if("undefined"==typeof window)return!1;try{return"undefined"!=typeof sessionStorage&&sessionStorage}catch(e){return console.error("sessionStorage not available",e),!1}})()&&(e.BrowserExtensionPlugin=()=>e=>{const t=function(){let e;return{update:async function(t){null==e||e();const{cancel:n,promise:r}=Ue({message:"TOLGEE_READY",recievingMessage:["TOLGEE_PLUGIN_READY","TOLGEE_PLUGIN_UPDATED"],data:t,attempts:4});return e=n,r}}}();e.on("running",(({value:n})=>{var r;n&&(r=()=>{t.update({uiPresent:!0,uiVersion:void 0,mode:e.isDev()?"development":"production",config:{apiUrl:e.getInitialOptions().apiUrl||"",apiKey:e.getInitialOptions().apiKey||""}}).catch(ze)},"loading"!==document.readyState?Promise.resolve().then((()=>{r()})):document.addEventListener&&document.addEventListener("DOMContentLoaded",r))}));return Ve()&&(async()=>{const e=await Me("prerelease");return t=>{const n=Ve();return t.addPlugin(e({credentials:n})),t}})().then((t=>{e.addPlugin(t)})).catch((e=>{console.error("Tolgee: Failed to load in-context tools"),console.error(e)})),e});const We="__tolgee_currentLanguage";function Ge(e,t){const n=t.find((t=>t===e));if(n)return n;const r=e=>e.replace(/^(.+?)(-.*)?$/,"$1"),a=r(e),o=t.find((e=>r(e)===a));return o||void 0}function Ye(e){return e.endsWith("/")?e.slice(0,-1):e}const He={prefix:"/i18n",getPath:({namespace:e,language:t,prefix:n})=>e?`${Ye(n)}/${e}/${t}.json`:`${Ye(n)}/${t}.json`,getData:function(e){return e.json()},headers:{Accept:"application/json"},timeout:void 0,fallbackOnFail:!1};function Xe(e){const t=u(c(c({},He),e),{headers:c(c({},He.headers),null==e?void 0:e.headers)}),{prefix:n,getPath:r,getData:a,headers:o,timeout:i,fallbackOnFail:s}=t,l=g(t,["prefix","getPath","getData","headers","timeout","fallbackOnFail"]);return{async getRecord({namespace:e,language:t,fetch:u}){const d=r({namespace:e,language:t,prefix:n});try{const e=await((e,t,n,r)=>{var a=r,{signal:o}=a,i=g(a,["signal"]);const s=new AbortController;return new Promise(((r,a)=>{const l=e(t,c({signal:s.signal},i));let u=!1;function g(e){!u&&a(e),u=!0}function d(){const e=new Error(`TIMEOUT: ${t}`);s.abort(e),g(e)}if(o&&o.addEventListener("abort",d),void 0!==n){const e=setTimeout(d,n);l.finally((()=>clearTimeout(e)))}l.catch(g).then((function(e){!u&&r(e),u=!0}))}))})(u,d,i,c({headers:o},l));if(!e.ok)throw new Error(`${e.url} ${e.status}`);return await a(e)}catch(e){if(s)return;throw e}}}}e.BackendFetch=e=>(t,n)=>(n.addBackend(Xe(e)),t),e.DEVTOOLS_ID=ae,e.DevBackend=()=>(e,t)=>(t.setDevBackend({getRecord({apiUrl:e,apiKey:t,language:n,namespace:r,projectId:a,filterTag:o,fetch:i}){var s;const l=null!=(s=Ie(t))?s:a;let c;if(c=_e(e,void 0!==l?`/v2/projects/${l}/translations/${n}`:`/v2/projects/translations/${n}`),r&&c.searchParams.append("ns",r),null==o||o.forEach((e=>{c.searchParams.append("filterTag",e)})),"tgpat"===function(e){if(!e)return;const[t]=e.split("_");return"tgpak"===t?"tgpak":"tgpat"===t?"tgpat":"legacy"}(t)&&void 0===a)throw new Error("You need to specify 'projectId' when using PAT key");return i(c.toString(),{headers:{"X-API-Key":t||"","Content-Type":"application/json"},next:{revalidate:0}}).then((e=>{if(e.ok)return e.json().then((e=>e[n]));throw new Error(e.statusText)}))}}),e),e.DevTools=()=>e=>e,e.FormatSimple=()=>(e,t)=>(t.setFinalFormatter({format:({translation:e,params:t})=>re(e,t)}),e),e.LanguageDetector=()=>(e,t)=>(t.setLanguageDetector({getLanguage:({availableLanguages:e})=>(ue("LanguageDetector"),Ge(window.navigator.language,e))}),e),e.LanguageDetectorError=N,e.LanguageStorage=()=>(e,t)=>(t.setLanguageStorage({getLanguage:()=>(ue("LanguageStorage"),localStorage.getItem(We)||void 0),setLanguage(e){ue("LanguageStorage"),localStorage.setItem(We,e)}}),e),e.LanguageStorageError=j,e.ObserverPlugin=()=>(e,t)=>("text"===e.getInitialOptions().observerType?t.setObserver((()=>{const e=Le();return Object.freeze(u(c({},e),{run(t){const n=Ce({inputPrefix:t.options.inputPrefix,inputSuffix:t.options.inputSuffix,translate:t.translate});e.run(u(c({},t),{wrapper:n}))},retranslate(){e.forEachElement(((t,n)=>{for(const[t,r]of n.nodes.entries()){if(r.keyAttributeOnly)return;const n=e.unwrap(r.oldTextContent);n&&fe(t,n.text)}}))},outputNotFormattable:!0}))})):t.setObserver((()=>{const e=Le();return Object.freeze(u(c({},e),{run(t){const n=xe({fullKeyEncode:t.options.fullKeyEncode});e.run(u(c({},t),{wrapper:n}))},retranslate(){},outputNotFormattable:!1}))})),e),e.PREFERRED_LANGUAGES_LOCAL_STORAGE_KEY="__tolgee_preferredLanguages",e.RecordFetchError=k,e.TOLGEE_ATTRIBUTE_NAME=se,e.TOLGEE_RESTRICT_ATTRIBUTE=ie,e.TOLGEE_WRAPPED_ONLY_DATA_ATTRIBUTE=oe,e.Tolgee=function(){return K().use(e.BrowserExtensionPlugin())},e.TolgeeCore=K,e.createFetchFunction=O,e.detectLanguage=Ge,e.detectLanguageFromHeaders=(e,t)=>{const n=function(e){const t=e.get("Accept-Language");if(!t)return[];const n=t.split(",").map((e=>{const[t]=e.trim().split(";");return t}));return[...new Set(n.filter((e=>e&&"*"!==e)))]}(e);return n[0]&&Ge(n[0],t)},e.getFallback=m,e.getFallbackArray=y,e.getProjectIdFromApiKey=Ie,e.getTranslateProps=M,e.isSSR=ce,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=tolgee-web.production.umd.min.js.map
